(this["webpackJsonpio.cordova.hellocordova"]=this["webpackJsonpio.cordova.hellocordova"]||[]).push([[0],{95:function(e,n,a){},97:function(e,n,a){"use strict";a.r(n);var t=a(38),r=a.n(t),o=(a(11),a(101)),i=a(27),c=Object(i.a)(),s=a(23),l=a(17),u=a(0),d=a.n(u),j=a(1),p="LOGIN",b="LOGOUT",g="CHANGE_EMAIL_LOGIN",O="CHANGE_PASSWORD_LOGIN",m="ISFETCHING_START",h="ISFETCHING_COMPLETE",f=a(44);a(65),a(98);f.a.initializeApp({apiKey:"AIzaSyCqupkvp1jXt8y8WjVjSuqi9OFMkJu_LpI",authDomain:"mc-dron.firebaseapp.com",projectId:"mc-dron",storageBucket:"mc-dron.appspot.com",messagingSenderId:"410639876260",appId:"1:410639876260:web:045fb9451d7ec1d6ee2631"});var x=function(e,n){return new Promise((function(a,t){console.log(e,n),f.a.auth().signInWithEmailAndPassword(e,n).then((function(){console.log("Se logue\xf3");var e=f.a.auth().currentUser;if(e.emailVerified)return console.log("Email is verified"),a();console.log("Email is not verified"),app.dialog.alert("Falta verificar el email. Compruebe su casilla de correos","Atenci\xf3n"),e.sendEmailVerification()})).catch((function(e){console.log(e.code),t(e)}))}))},v=function(e,n){return function(){var a=Object(j.a)(d.a.mark((function a(t){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t((console.log("llega a isfetching"),{type:m})),a.abrupt("return",new Promise(function(){var a=Object(j.a)(d.a.mark((function a(r,o){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(""==e||""==n){a.next=5;break}return a.next=3,x(e,n).then((function(e){return console.log("llega al then del loginPersistencia"),t({type:p,payload:{data:{isLoggedIn:!0,usuario:e}}}),r(e)})).catch((function(e){console.log("llega al catch del loginPersistencia"),o(e)})).finally(t({type:h}));case 3:a.next=6;break;case 5:return a.abrupt("return",o());case 6:case 7:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}()));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},y=function(){return{type:b,payload:{data:{isLoggedIn:!1}}}},w=a(12),I=Object(s.b)(null,{logout:y})((function(e){e.logout,e.admin;return Object(w.jsx)("div",{className:"m-0 row justify-content-center",children:"PRINCIPAL"})})),L=Object(s.b)((function(e){return{email:e.app.usuario.email,password:e.app.usuario.password,admin:e.app.usuario.admin,isFetching:e.app.isFetching}}),{login:v,emailOnChangeLogin:function(e){return{type:g,payload:{data:e}}},passwordOnChangeLogin:function(e){return{type:O,payload:{data:e}}}})((function(e){var n=e.isFetching,a=e.login,t=e.emailOnChangeLogin,r=e.passwordOnChangeLogin,o=e.email,i=e.password,s=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(o,i).then((function(){return c.push("/")})).catch((function(){return c.push("/errorlogin")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n?Object(w.jsx)("h3",{children:"cargando ...."}):Object(w.jsx)("div",{class:"text-center",children:Object(w.jsx)("main",{class:"form-signin",children:Object(w.jsxs)("form",{class:"text-center",children:[Object(w.jsx)("img",{class:"mb-4",src:"./img/logo.png",alt:"",width:"100%",height:"100px"}),Object(w.jsx)("h1",{class:"h3 mb-3 fw-normal",children:"Please sign in"}),Object(w.jsxs)("div",{class:"form-floating",children:[Object(w.jsx)("input",{type:"email",class:"form-control",id:"floatingInput",placeholder:"name@example.com",value:o,onChange:function(e){return t(e.target.value)}}),Object(w.jsx)("label",{for:"floatingInput",children:"Email address"})]}),Object(w.jsxs)("div",{class:"form-floating",children:[Object(w.jsx)("input",{type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password",value:i,onChange:function(e){return r(e.target.value)}}),Object(w.jsx)("label",{for:"floatingPassword",children:"Password"})]}),Object(w.jsx)("div",{class:"checkbox mb-3",children:Object(w.jsxs)("label",{children:[Object(w.jsx)("input",{type:"checkbox",value:"remember-me"})," Remember me"]})}),Object(w.jsx)("button",{onClick:function(){return s()},class:"w-100 btn btn-lg btn-primary bg-bluemcdron",type:"submit",children:"Sign in"}),Object(w.jsx)("p",{class:"mt-5 mb-3 text-muted",children:"\xa9 2017\u20132021"})]})})})})),k=Object(s.b)(null,null)((function(e){var n=e.mensaje;return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{children:Object(w.jsx)("h3",{className:"display-4 text-center text-dark",children:n})}),Object(w.jsx)("div",{class:"d-grid gap-2 col-5 mx-auto",children:Object(w.jsx)("button",{onClick:function(){return c.push("/")},type:"button",class:"btn btn-dark me-md-2  mt-4",children:"PRINCIPAL"})})]})})),C=Object(s.b)(null,{login:v,logout:y})((function(e){var n=e.isLoggedIn,a=e.admin;return Object(w.jsxs)(o.d,{children:[Object(w.jsx)(o.b,{exact:!0,path:"/",render:function(){return n?Object(w.jsx)(I,{admin:a}):Object(w.jsx)(o.a,{to:"/login"})}}),Object(w.jsx)(o.b,{exact:!0,path:"/noautorizado",render:function(){return Object(w.jsx)(k,{mensaje:"Acceso no autorizado"})}}),Object(w.jsx)(o.b,{exact:!0,path:"/errorlogin",render:function(){return Object(w.jsx)(k,{mensaje:"Login incorrecto"})}}),Object(w.jsx)(o.b,{exact:!0,path:"/ocurrioproblema",render:function(){return Object(w.jsx)(k,{mensaje:"Ocurri\xf3 un problema"})}}),Object(w.jsx)(o.b,{path:"/login",render:function(e){return Object(w.jsx)(L,Object(l.a)({},e))}})]})})),E=Object(s.b)((function(e){return{isLoggedIn:e.app.isLoggedIn,admin:e.app.usuario.admin}}))((function(e){var n=e.isLoggedIn,a=e.admin;return Object(w.jsx)("div",{children:Object(w.jsx)(o.c,{history:c,children:Object(w.jsx)(C,{isLoggedIn:n,admin:a})})})})),P=a(33),F=a(53),S={isLoggedIn:!1,isFetching:!1,usuario:{nombre:null,apellido:null,email:null,nick:null,urlFoto:null,password:null,admin:!1}},_=Object(P.b)({app:function(){var e,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)(Object(l.a)({},a),{},{isFetching:!0});case h:return Object(l.a)(Object(l.a)({},a),{},{isFetching:!1});case p:return Object(l.a)(Object(l.a)({},a),{},{isFetching:!1,isLoggedIn:t.payload.data.isLoggedIn,usuario:Object(l.a)(Object(l.a)({},a.usuario),{},{nombre:null===(e=t.payload.data.usuario)||void 0===e?void 0:e.nombre,apellido:null===(n=t.payload.data.usuario)||void 0===n?void 0:n.apellido,admin:t.payload.data.usuario.admin,email:t.payload.data.usuario.email,nick:t.payload.data.usuario.nick,password:t.payload.data.usuario.password,urlFoto:t.payload.data.usuario.urlFoto})});case b:return Object(l.a)(Object(l.a)({},a),{},{isLoggedIn:t.payload.data.isLoggedIn});case O:return Object(l.a)(Object(l.a)({},a),{},{usuario:Object(l.a)(Object(l.a)({},a.usuario),{},{password:t.payload.data})});case g:return Object(l.a)(Object(l.a)({},a),{},{usuario:Object(l.a)(Object(l.a)({},a.usuario),{},{email:t.payload.data})});default:return a}}}),N=window.window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.c,A=[F.a],G=Object(P.d)(_,N(P.a.apply(void 0,A)));a(72),a(73),a(95);r.a.render(Object(w.jsx)(s.a,{store:G,children:Object(w.jsx)(E,{})}),document.querySelector("#root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.b2515407.chunk.js.map